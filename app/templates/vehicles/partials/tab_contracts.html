{# Contracts tab partial for vehicle detail #}
{% if records %}
<div class="overflow-x-auto">
    <table class="w-full text-sm">
        <thead>
            <tr class="border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50">
                <th class="px-4 py-3 text-left font-medium text-gray-500">{{ _('common.status') }}</th>
                <th class="px-4 py-3 text-left font-medium text-gray-500">{{ _('common.type') }}</th>
                <th class="px-4 py-3 text-left font-medium text-gray-500">{{ _('contract.contractor') }}</th>
                <th class="px-4 py-3 text-left font-medium text-gray-500">{{ _('contract.contract_number') }}</th>
                <th class="px-4 py-3 text-left font-medium text-gray-500">{{ _('common.period') }}</th>
                <th class="px-4 py-3 text-right font-medium text-gray-500">{{ _('common.amount') }}</th>
            </tr>
        </thead>
        <tbody class="divide-y divide-gray-100 dark:divide-gray-700">
            {% for c in records %}
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer" onclick="window.location='/contracts/{{ c.id }}'">
                <td class="px-4 py-3">
                    <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium
                        {% if c.status.value == 'active' %}bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400
                        {% elif c.status.value == 'expired' %}bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400
                        {% elif c.status.value == 'pending_renewal' %}bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400
                        {% else %}bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300{% endif %}">
                        {{ _('status.' + c.status.value) }}
                    </span>
                </td>
                <td class="px-4 py-3 text-gray-700 dark:text-gray-300">{{ _('contract_type.' + c.type.value) }}</td>
                <td class="px-4 py-3 font-medium text-gray-900 dark:text-white">{{ c.contractor }}</td>
                <td class="px-4 py-3 text-gray-500 font-mono text-xs">{{ c.contract_number or '—' }}</td>
                <td class="px-4 py-3 text-gray-600 dark:text-gray-300 whitespace-nowrap text-xs">
                    {{ c.start_date }} — {{ c.end_date }}
                </td>
                <td class="px-4 py-3 text-right font-mono font-medium text-gray-900 dark:text-white whitespace-nowrap">
                    {% if c.amount %}{{ "{:,.0f}".format(c.amount) }} ₸{% else %}—{% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<p class="mt-3 text-xs text-gray-400 px-4">{{ _('vtab.showing_of', count=records|length, total=total) }}</p>
{% else %}
<div class="text-center py-8 text-gray-400">
    <svg class="w-10 h-10 mx-auto mb-2 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
    </svg>
    <p class="text-sm">{{ _('vtab.no_contracts') }}</p>
</div>
{% endif %}
