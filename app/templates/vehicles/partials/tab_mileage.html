{# Mileage history tab partial for vehicle detail #}
{% if logs %}
<div class="overflow-x-auto">
    <table class="w-full text-sm">
        <thead>
            <tr class="border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50">
                <th class="px-4 py-3 text-left font-medium text-gray-500">{{ _('common.date') }}</th>
                <th class="px-4 py-3 text-right font-medium text-gray-500">{{ _('vehicle.current_mileage') }}</th>
                <th class="px-4 py-3 text-right font-medium text-gray-500">+/-</th>
                <th class="px-4 py-3 text-left font-medium text-gray-500">{{ _('vtab.source') }}</th>
                <th class="px-4 py-3 text-left font-medium text-gray-500">{{ _('common.notes') }}</th>
            </tr>
        </thead>
        <tbody class="divide-y divide-gray-100 dark:divide-gray-700">
            {% for log in logs %}
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50">
                <td class="px-4 py-3 text-gray-600 dark:text-gray-300 whitespace-nowrap">
                    {{ log.recorded_at.strftime('%Y-%m-%d %H:%M') if log.recorded_at else 'â€”' }}
                </td>
                <td class="px-4 py-3 text-right font-mono font-medium text-gray-900 dark:text-white">
                    {{ "{:,}".format(log.value) }} km
                </td>
                <td class="px-4 py-3 text-right font-mono text-xs">
                    {% if not loop.last %}
                    {% set delta = log.value - logs[loop.index].value %}
                    <span class="{% if delta > 0 %}text-green-600 dark:text-green-400{% else %}text-gray-400{% endif %}">
                        +{{ "{:,}".format(delta) }}
                    </span>
                    {% endif %}
                </td>
                <td class="px-4 py-3">
                    <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium
                        {% if log.source.value == 'manual' %}bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300
                        {% elif log.source.value == 'obd' %}bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400
                        {% else %}bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400{% endif %}">
                        {{ log.source.value | upper }}
                    </span>
                </td>
                <td class="px-4 py-3 text-gray-500 text-xs max-w-xs truncate">{{ log.notes or '' }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<p class="mt-3 text-xs text-gray-400 px-4">{{ _('vtab.showing_records', count=logs|length) }}</p>
{% else %}
<div class="text-center py-8 text-gray-400">
    <svg class="w-10 h-10 mx-auto mb-2 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
    </svg>
    <p class="text-sm">{{ _('vtab.no_mileage') }}</p>
</div>
{% endif %}
