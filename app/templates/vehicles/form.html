{% extends "base.html" %}

{% block title %}{% if vehicle %}{{ _('btn.edit') }}{% else %}{{ _('btn.create') }}{% endif %} â€” {{ _('nav.vehicles') }}{% endblock %}
{% block page_title %}{% if vehicle %}{{ _('btn.edit') }}: {{ vehicle.license_plate }}{% else %}{{ _('btn.create') }}{% endif %}{% endblock %}

{% block content %}
<div class="max-w-3xl">
    {% if error %}
    <div class="mb-4 p-3 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400 text-sm">
        {{ error }}
    </div>
    {% endif %}

    <form method="POST" class="fc-card p-6 space-y-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label class="fc-label">{{ _('vehicle.license_plate') }}</label>
                <input type="text" name="license_plate" value="{{ vehicle.license_plate if vehicle else '' }}" required placeholder="123 ABC 01" class="fc-input">
            </div>
            <div>
                <label class="fc-label">{{ _('vehicle.vin') }}</label>
                <input type="text" name="vin" value="{{ vehicle.vin if vehicle else '' }}" required placeholder="17 characters" class="fc-input">
            </div>
            <div>
                <label class="fc-label">{{ _('vehicle.brand') }}</label>
                <input type="text" name="brand" value="{{ vehicle.brand if vehicle else '' }}" required placeholder="Toyota" class="fc-input">
            </div>
            <div>
                <label class="fc-label">{{ _('vehicle.model') }}</label>
                <input type="text" name="model" value="{{ vehicle.model if vehicle else '' }}" required placeholder="Camry" class="fc-input">
            </div>
            <div>
                <label class="fc-label">{{ _('vehicle.year') }}</label>
                <input type="number" name="year" value="{{ vehicle.year if vehicle else '2024' }}" required class="fc-input">
            </div>
            <div>
                <label class="fc-label">{{ _('vehicle.color') }}</label>
                <input type="text" name="color" value="{{ vehicle.color if vehicle else '' }}" class="fc-input">
            </div>
            <div>
                <label class="fc-label">{{ _('vehicle.body_type') }}</label>
                <select name="body_type" class="fc-select">
                    {% for opt in body_types %}
                    <option value="{{ opt.value }}" {% if vehicle and opt.value == vehicle.body_type.value %}selected{% endif %}>{{ _('body_type.' + opt.value) }}</option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <label class="fc-label">{{ _('vehicle.fuel_type') }}</label>
                <select name="fuel_type" class="fc-select">
                    {% for opt in fuel_types %}
                    <option value="{{ opt.value }}" {% if vehicle and opt.value == vehicle.fuel_type.value %}selected{% endif %}>{{ _('fuel_type.' + opt.value) }}</option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <label class="fc-label">{{ _('vehicle.engine_volume') }} (L)</label>
                <input type="number" name="engine_volume" value="{{ vehicle.engine_volume if vehicle and vehicle.engine_volume else '' }}" step="0.1" class="fc-input">
            </div>
            <div>
                <label class="fc-label">{{ _('vehicle.transmission') }}</label>
                <select name="transmission" class="fc-select">
                    {% for opt in transmission_types %}
                    <option value="{{ opt.value }}" {% if vehicle and opt.value == vehicle.transmission.value %}selected{% endif %}>{{ _('transmission.' + opt.value) }}</option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <label class="fc-label">{{ _('vehicle.seats') }}</label>
                <input type="number" name="seats" value="{{ vehicle.seats if vehicle and vehicle.seats else '' }}" class="fc-input">
            </div>
            <div>
                <label class="fc-label">{{ _('vehicle.purchase_price') }}</label>
                <input type="number" name="purchase_price" value="{{ vehicle.purchase_price if vehicle and vehicle.purchase_price else '' }}" step="0.01" class="fc-input">
            </div>
            <div>
                <label class="fc-label">{{ _('vehicle.department') }}</label>
                <input type="text" name="department" value="{{ vehicle.department if vehicle and vehicle.department else '' }}" class="fc-input">
            </div>
            {% if vehicle %}
            <div>
                <label class="fc-label">{{ _('common.status') }}</label>
                <select name="status" class="fc-select">
                    {% for opt in statuses %}
                    <option value="{{ opt.value }}" {% if opt.value == vehicle.status.value %}selected{% endif %}>{{ _('status.' + opt.value) }}</option>
                    {% endfor %}
                </select>
            </div>
            {% endif %}
        </div>

        <div>
            <label class="fc-label">{{ _('common.notes') }}</label>
            <textarea name="notes" rows="3" class="fc-textarea">{{ vehicle.notes if vehicle and vehicle.notes else "" }}</textarea>
        </div>

        <div class="flex items-center gap-3">
            <button type="submit" class="fc-btn-primary">{{ _('btn.save') }}</button>
            <a href="/vehicles{% if vehicle %}/{{ vehicle.id }}{% endif %}" class="fc-btn-secondary">{{ _('btn.cancel') }}</a>
        </div>
    </form>
</div>
{% endblock %}
